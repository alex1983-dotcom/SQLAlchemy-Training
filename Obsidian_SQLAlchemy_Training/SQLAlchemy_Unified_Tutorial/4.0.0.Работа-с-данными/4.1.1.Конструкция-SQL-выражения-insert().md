
---

### –®–∞–≥ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```python
# –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é SQLite –ë–î –≤ –ø–∞–º—è—Ç–∏
from sqlalchemy import create_engine, MetaData, Table, Column, Integer, String, insert

engine = create_engine("sqlite:///:memory:", echo=True)  # echo=True –ø–æ–∫–∞–∂–µ—Ç SQL –≤ –∫–æ–Ω—Å–æ–ª–∏
metadata_obj = MetaData()
```

---

### üìã –®–∞–≥ 1: –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É

```python
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É (–∫–∞–∫ –≤ tutorial)
user_table = Table(
    "user_account",
    metadata_obj,
    Column("id", Integer, primary_key=True),
    Column("name", String(30)),
    Column("fullname", String),
)

# –°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î
metadata_obj.create_all(engine)
```

> `echo=True` –≤ `create_engine` –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π SQL, –∫–æ—Ç–æ—Ä—ã–π SQLAlchemy –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –ë–î ‚Äî –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è ¬´—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º¬ª.

---

### –®–∞–≥ 2: –°–æ–∑–¥–∞—ë–º INSERT-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ

```python
# –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç Insert (SQL Expression Construct)
stmt = insert(user_table).values(name="spongebob", fullname="Spongebob Squarepants")

# –°–º–æ—Ç—Ä–∏–º —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞
type(stmt)
# <class 'sqlalchemy.sql.dml.Insert'>
```

> üîç **–í–∞–∂–Ω–æ:** `stmt` ‚Äî —ç—Ç–æ –ù–ï —Å—Ç—Ä–æ–∫–∞ SQL, –∞ –æ–±—ä–µ–∫—Ç-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞. SQLAlchemy —Å—Ç—Ä–æ–∏—Ç –µ–≥–æ –∫–∞–∫ –¥–µ—Ä–µ–≤–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–π (expression tree).

---

### –®–∞–≥ 3: –ò–Ω—Å–ø–µ–∫—Ç–∏—Ä—É–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL

```python
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ –ø–µ—á–∞—Ç–∞–µ–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è)
print(stmt)
# INSERT INTO user_account (name, fullname) VALUES (:name, :fullname)

# –í–∞—Ä–∏–∞–Ω—Ç 2: –Ø–≤–Ω–æ –ø–æ–ª—É—á–∞–µ–º —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
compiled = stmt.compile()

# –°–º–æ—Ç—Ä–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (bound parameters)
compiled.params
# {'name': 'spongebob', 'fullname': 'Spongebob Squarepants'}

# –°–º–æ—Ç—Ä–∏–º "—Å—ã—Ä–æ–π" SQL –±–µ–∑ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π
str(compiled)
# 'INSERT INTO user_account (name, fullname) VALUES (:name, :fullname)'
```

> üí° `:name`, `:fullname` ‚Äî —ç—Ç–æ **–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã**. –ó–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection).

---

### –®–∞–≥ 4: –í—ã–ø–æ–ª–Ω—è–µ–º INSERT –≤ –ë–î

```python
# –í—ã–ø–æ–ª–Ω—è–µ–º —á–µ—Ä–µ–∑ connection
with engine.connect() as conn:
    result = conn.execute(stmt)
    conn.commit()  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î!
    
    print(f"–í—Å—Ç–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫: {result.rowcount}")
    print(f"ID –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏: {result.inserted_primary_key}")
```

> ‚ö†Ô∏è **–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:** –í SQLAlchemy 2.0 –Ω—É–∂–Ω–æ —è–≤–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `commit()` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç 1.4).

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```python
# –ß–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ (—á–µ—Ä–µ–∑ Core, –Ω–µ ORM)
from sqlalchemy import select

with engine.connect() as conn:
    result = conn.execute(select(user_table))
    for row in result:
        print(row)
# (1, 'spongebob', 'Spongebob Squarepants')
```

---

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (–≤—ã–ø–æ–ª–Ω–∏ —Å–∞–º):

```python
# –°–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π INSERT –±–µ–∑ .values()
stmt2 = insert(user_table)
print(stmt2)  # –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç "–ø—É—Å—Ç–æ–π" INSERT?

# –ü–µ—Ä–µ–¥–∞–π –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏, –∞ –Ω–µ –≤ .values()
stmt3 = insert(user_table)
with engine.connect() as conn:
    conn.execute(stmt3, {"name": "patrick", "fullname": "Patrick Star"})
    conn.commit()

# –í—Å—Ç–∞–≤—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤
stmt4 = insert(user_table)
with engine.connect() as conn:
    conn.execute(
        stmt4,
        [
            {"name": "sandy", "fullname": "Sandy Cheeks"},
            {"name": "squidward", "fullname": "Squidward Tentacles"},
        ]
    )
    conn.commit()
```

---

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è                 | –ß—Ç–æ —ç—Ç–æ                       | –ó–∞—á–µ–º –Ω—É–∂–Ω–æ                                         |
| ------------------------- | ----------------------------- | --------------------------------------------------- |
| `insert(table)`           | –§–∞–±—Ä–∏–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ `Insert`     | –°–æ–∑–¥–∞—ë—Ç expression construct, –∞ –Ω–µ —Å—Ç—Ä–æ–∫—É SQL       |
| `.values()`               | –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∞–º | –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –î–û –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–ª–∏ –ü–†–ò –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ |
| `compiled.params`         | –°–ª–æ–≤–∞—Ä—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤            | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç bound parameters –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏             |
| –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã | `:name`, `:fullname`          | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å + –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞ –ë–î   |

---

### ‚ùì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–±—è:

1. –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è `insert(user_table)` –æ—Ç `insert(user_table).values(...)`?
2. –ü–æ—á–µ–º—É `print(stmt)` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `:name`, –∞ –Ω–µ `'spongebob'`?
3. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –∑–∞–±—ã—Ç—å `conn.commit()` –ø–æ—Å–ª–µ `execute(stmt)`?
